javascript:( function() { function start_tokenize(){console.log("tokenize"); kuromoji.builder({ dicPath: "/content/dam/kuromoji/dict/" }).build(function (err, tokenizer) { var str = $(".coral-RichText-editable").text(); var rstr=""; var path = tokenizer.tokenize(str ); path.forEach(function(v, i, a){ rstr+=v.surface_form+"#"; console.log(v.surface_form); }); console.log(path); console.log(rstr); document.body.removeChild(document.getElementById('kuromoji')); $(".coral-RichText-editable").text(rstr); }); } var script = document.createElement('script'); script.src = '/content/dam/kuromoji/kuromoji.js'; script.onload = start_tokenize; script.id="kuromoji"; document.body.appendChild(script); } )();